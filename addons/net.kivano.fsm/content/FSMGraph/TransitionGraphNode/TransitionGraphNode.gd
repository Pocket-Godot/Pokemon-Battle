tool
extends "res://addons/net.kivano.fsm/content/FSMGraph/GraphNode/GraphNode.gd";
#################################### N O T E S ###################################
# Change this template under /addons/net.kivano.smartextender/SCRIPT_TEMPLATE
# 
# 
# 

##################################################################################
#########                     Imported classes/scenes                    #########
##################################################################################

##################################################################################
#########                       Signals definitions                      #########
##################################################################################

##################################################################################
#####  Variables (Constants, Export Variables, Node Vars, Normal variables)  #####
######################### var myvar setget myvar_set,myvar_get ###################

##################################################################################
#########                          Init code                             #########
##################################################################################
func _notification(what):
	if (what == NOTIFICATION_INSTANCED):
		pass #all internal initialization
	elif(what == NOTIFICATION_READY):
		baseType = TYPE_TRANSITION;
		inputConnectionType = TYPE_STATE;
		outputConnectionType = TYPE_STATE;
		#setName(name);
##################################################################################
#########                       Getters and Setters                      #########
##################################################################################

##################################################################################
#########              Should be implemented in inheritanced             #########
##################################################################################
func canConnect2AnotherNode():
	if(!ownerFsmRef.get_ref()):
		queue_free();
		return false;
	var fsm = ownerFsmRef.get_ref();
	if(!fsm.hasTransition(get_name())): 
		queue_free();
		return false;
	
	var relatedFsmTransition = fsm.getTransition(get_name());
	var targetFSMState = relatedFsmTransition.getTargetFSMState();
	return targetFSMState==null;


func isAcceptingIncomingConnections():
	return true;

##################################################################################
#########                    Implemented from ancestor                   #########
##################################################################################

##################################################################################
#########                       Connected Signals                        #########
##################################################################################

##################################################################################
#########     Methods fired because of events (usually via Groups interface)  ####
##################################################################################

##################################################################################
#########                         Public Methods                         #########
##################################################################################

##################################################################################
#########                         Inner Methods                          #########
##################################################################################

##################################################################################
#########                         Inner Classes                          #########
##################################################################################


